package io.github.anpahodzin.portfolio.main.hero.title

import androidx.compose.runtime.Composable
import org.jetbrains.compose.web.ExperimentalComposeWebSvgApi
import org.jetbrains.compose.web.css.*
import org.jetbrains.compose.web.svg.*

private object HeroTextStylesheet : StyleSheet() {
    val keyframes by keyframes {
        from { property("transform", "translateX(-50%)") }
        to { property("transform", "translateX(100%)") }
    }
    val rect by style {
        animation(keyframes) {
            delay(600.ms)
            duration(3000.ms)
            timingFunction(AnimationTimingFunction.Linear)
            fillMode(AnimationFillMode.Forwards)
        }
        property("transform", "translateX(-50%)")
        property("will-change", "transform")
    }
}

private const val path =
    "m6.18 131.66 4.5-11.36a30.8 30.8 0 0 0 8.61 4.23 29.9 29.9 0 0 0 9.23 1.7q7.22 0 11.6-4a13 13 0 0 0 4.38-10.06 15.8 15.8 0 0 0-2.44-8.49q-2.44-3.92-12.25-8.55l-7.28-3.39q-9.25-4.27-12.92-10.2a26.53 26.53 0 0 1-3.67-14.26A22 22 0 0 1 13.1 50.5q7.16-6.67 18.39-6.67 15 0 20.86 4.88l-3.64 10.74A28.3 28.3 0 0 0 41.18 56a30.1 30.1 0 0 0-9.38-1.67q-6.3 0-9.91 3.58a12.4 12.4 0 0 0-3.61 9.2 15 15 0 0 0 1.3 6.29 13.16 13.16 0 0 0 3.61 4.75q2.31 1.91 9.47 5.37L40.07 87q9.26 4.38 13 10.46T56.79 113q0 10.18-8.18 17.28t-21.88 7.1q-12.03-.04-20.55-5.72m59.62-29.07q0-15.31 8.24-24.72t21.69-9.41q14.2 0 22 9t7.84 25.09q0 16-8 25.21T95.74 137q-14.13 0-22-9.32t-7.94-25.09m12.34 0q0 24.87 17.59 24.87a14.86 14.86 0 0 0 12.87-6.67q4.66-6.67 4.66-18.21Q113.27 78 95.74 78a15.08 15.08 0 0 0-12.81 6.54q-4.78 6.57-4.78 18.05Zm95.55-49.5a20.6 20.6 0 0 0-6.69-1.24 11.15 11.15 0 0 0-8.86 4.07 15.3 15.3 0 0 0-3.49 10.31 20.3 20.3 0 0 0 .31 3.46h13.46v9.88H155v56.23h-11.74V79.57h-9.63v-9.88h9.63q0-12.65 6.23-19.87T166 42.6a36.6 36.6 0 0 1 11 1.85Zm15.18 25.86h-7.65v-9.26h7.65V55.87l11.73-4.5v18.32h18.15v9.26H200.6v32.83q0 8.33 2.81 11.85t9 3.52a21.7 21.7 0 0 0 9.32-2.29l1.73 10.31a64.8 64.8 0 0 1-16 1.85 17.35 17.35 0 0 1-13.24-5.83 20.82 20.82 0 0 1-5.4-14.72ZM295.89 137h-3.09l-19.37-45-19.32 45H251l-23.61-67.49h12.53L254 112.89l17.59-43.39h3.09l18.15 43.39 15.18-43.39h11.54Zm70.3-8.8q-7 8.83-21.54 8.83a18.54 18.54 0 0 1-13.49-5.65 19 19 0 0 1-5.71-14q0-10.06 8.79-17t22.44-6.94a26.3 26.3 0 0 1 8.4 1.56q0-16-14.32-16-11 0-16.91 5.92l-4.94-9.81a29 29 0 0 1 9.23-4.66 36 36 0 0 1 11.26-1.94q14.38 0 20.89 6.54t6.51 20.8v23.7q0 8.7 5.18 11.6V137q-7.16 0-10.71-2a11.48 11.48 0 0 1-5.08-6.8m-1.11-24.87a42.5 42.5 0 0 0-7.78-1.23q-8.89 0-14.5 4.57t-5.62 10.8q0 10.31 12.16 10.31 8.89 0 15.74-8.46ZM431.18 81a13.44 13.44 0 0 0-7.71-2.65q-6.23 0-10.89 5.74a21.23 21.23 0 0 0-4.66 13.82v37.9h-11.73V69.69h11.73v10.55q6.41-11.78 19.08-11.78a53 53 0 0 1 9.07 1.11Zm68.88 22.88h-47.65q0 11.6 6.36 17.84 5.61 5.43 14.44 5.43 10.06 0 16.79-5.86l4.94 8.46a22.1 22.1 0 0 1-8.33 4.69 45.1 45.1 0 0 1-15.68 2.56 29.25 29.25 0 0 1-21.17-8.46q-9.69-9.32-9.69-25.06 0-16.36 9.94-26.23a28.86 28.86 0 0 1 21-8.83q14.13 0 22.16 8 7.83 7.65 7.83 20.3a26.2 26.2 0 0 1-.94 7.16m-28.45-25.55a18.53 18.53 0 0 0-18.89 17h36.6a16.7 16.7 0 0 0-4.44-11.85q-4.88-5.15-13.27-5.15M22.6 208.16v25.12h29.87v10.49H22.6v32.59h41v11.11H10.26v-90.42h54v11.11Zm95.11 79.31V249q0-10.56-3.18-14.78T103.88 230a17.5 17.5 0 0 0-8.39 2.41 18.7 18.7 0 0 0-6.73 5.93v49.13H77v-66.1h8l3.7 8.52q5.8-9.75 18.95-9.75 21.72 0 21.72 26.42v40.92Zm25.98 18.09 6.36-9.38Q160.3 303 168.94 303q8 0 12.56-2.75t4.6-6.82q0-8-11.6-8a46 46 0 0 0-7.16 1 46 46 0 0 1-8.08 1q-14.07 0-14.07-10.62 0-3.27 3.3-5.93a20.5 20.5 0 0 1 8.18-3.83q-13.95-6.54-13.95-22.71a22.94 22.94 0 0 1 7.22-17.28 24.8 24.8 0 0 1 17.84-6.91q9.75 0 15.24 4l5.86-7 7.65 7.22-7 5.31q4.5 5.87 4.51 15.31a23.9 23.9 0 0 1-6.23 16.79q-6.24 6.79-16.36 7.78l-9.69 1a19 19 0 0 0-4.63 1.33q-2.9 1.14-2.9 3 0 2.53 6 2.53a55 55 0 0 0 8.27-1 55 55 0 0 1 8.33-1q9.75 0 15.21 4.66t5.47 12.92q0 9.13-8.18 14.75t-20.71 5.62a44.2 44.2 0 0 1-13.52-2.28 38.4 38.4 0 0 1-11.41-5.53m24.87-76a12.74 12.74 0 0 0-10 4.32 15.2 15.2 0 0 0-3.86 10.49 17.42 17.42 0 0 0 3.73 11.45 12.39 12.39 0 0 0 10.09 4.54 11.78 11.78 0 0 0 9.75-4.41q3.52-4.41 3.52-11.57A15.34 15.34 0 0 0 178 233.9a12.09 12.09 0 0 0-9.43-4.32Zm46.67 57.91v-56.22h-9.07v-9.87H227v66.1Zm6.42-91.1a7.16 7.16 0 1 1-5.12 2.1 7 7 0 0 1 5.12-2.09Zm64.62 91.1V249q0-10.56-3.18-14.78T272.44 230a17.5 17.5 0 0 0-8.39 2.41 18.7 18.7 0 0 0-6.73 5.93v49.13h-11.73v-66.1h8l3.7 8.52q5.8-9.75 18.95-9.75 21.72 0 21.72 26.42v40.92Zm84.06-31.91h-47.65q0 11.6 6.36 17.84 5.61 5.43 14.44 5.43 10.06 0 16.79-5.86l4.94 8.46a22.1 22.1 0 0 1-8.33 4.69 45.1 45.1 0 0 1-15.68 2.59 29.25 29.25 0 0 1-21.2-8.46q-9.69-9.32-9.69-25.06 0-16.36 9.94-26.23a28.86 28.86 0 0 1 21-8.83q14.13 0 22.16 8 7.78 7.66 7.78 20.31a26.2 26.2 0 0 1-.86 7.12M341.88 230A18.53 18.53 0 0 0 323 247h36.6a16.7 16.7 0 0 0-4.44-11.85q-4.89-5.15-13.28-5.15m97.39 25.56h-47.65q0 11.6 6.36 17.84 5.61 5.43 14.44 5.43 10.06 0 16.79-5.86l4.94 8.46a22.1 22.1 0 0 1-8.33 4.69 45.1 45.1 0 0 1-15.68 2.59 29.25 29.25 0 0 1-21.14-8.46q-9.69-9.32-9.69-25.06 0-16.36 9.94-26.23a28.86 28.86 0 0 1 21-8.83q14.13 0 22.16 8 7.78 7.66 7.78 20.31a26.2 26.2 0 0 1-.92 7.12M410.82 230a18.53 18.53 0 0 0-18.89 17h36.6a16.7 16.7 0 0 0-4.44-11.85q-4.88-5.15-13.27-5.15m77.64 2.67a13.44 13.44 0 0 0-7.71-2.65q-6.23 0-10.89 5.74a21.23 21.23 0 0 0-4.66 13.82v37.9h-11.74v-66.1h11.73v10.55q6.42-11.79 19.07-11.79a53 53 0 0 1 9.07 1.11Z"

@OptIn(ExperimentalComposeWebSvgApi::class)
@Composable
fun HeroTitleSecondLayer() {
    Style(HeroTextStylesheet)
    Svg("0 0 506 348", attrs ={
        style { property("will-change", "transform") }
    }) {
        Defs {
            LinearGradient(id = "fadeGradient") {
                Stop(attrs = {
                    attr("offset", "0%")
                    attr("stop-color", "white")
                    attr("stop-opacity", "0")
                })
                Stop(attrs = {
                    attr("offset", "25%")
                    attr("stop-color", "white")
                    attr("stop-opacity", "1")
                })
//                Stop(attrs = {
//                    attr("offset", "50%")
//                    attr("stop-color", "white")
//                    attr("stop-opacity", "1")
//                })
                Stop(attrs = {
                    attr("offset", "100%")
                    attr("stop-color", "white")
                    attr("stop-opacity", "1")
                })
            }
            Mask(id = "fadeMask") {
                Rect(x = 0.px, y = 0.px, width = 150.percent, height = 100.percent, attrs = {
                    classes(HeroTextStylesheet.rect)
                    attr("fill", "url(#fadeGradient)")
                }) {
//                    AnimateTransform (attrs = {
//                        attr("attributeName","gradientTransform")
//                        attr("type","translate")
//                        attr("from","0 0")
//                        attr("to","100 100")
//                        attr("dur","4s")
//                        attr("repeatCount","indefinite")
//                    })
                }
            }
        }
        Path(d = path, attrs = {
            style {
                property("fill", "white")
                property("mask", "url(#fadeMask)")
            }
        })
    }
}